{% stylesheet %}
.zhd_preloader {
  z-index: 99 !important;
}

.shopify-section .shopify-section-group-header-group .zhd_preloader {
  z-index: 99 !important;
}
{% endstylesheet %}

<!-- The preloader -->
{% if section.settings.enable_preloading %}
<div class="zhd_preloader" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 1); display: flex; justify-content: center; align-items: center;">
  <div class="loading-text" style="font-size: 48px; color: white;">
    <img src="{{ section.settings.preloader_img | img_url: 'master' }}">
  </div>
</div>
{% endif %}

{% schema %}
{
  "name": "ZHD PreLoader",
  "class": "zhd_preloader",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_preloading",
      "default": false,
      "label": "Enable Preloader?"
    },
    {
      "type": "image_picker",
      "id": "preloader_img",
      "label": "Preloader Image"
    }
  ],
  "presets": [
    {
      "name": "ZHD PreLoader",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% javascript %}
  // Set manual timeout to hide preloader after a certain time
  setTimeout(function () {
    $('.zhd_preloader').fadeOut(1000);	
  }, 2000);  // You can adjust this time as needed

  // Hide preloader when all content is loaded
  $(window).on("load", function () {
    $('.zhd_preloader').fadeOut(1000);	
  });
{% endjavascript %}
